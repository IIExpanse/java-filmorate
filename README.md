# JAVA-Filmorate
___

#### Реализованные задачи <br> (в порядке выполнения и слияния соответствующих веток с develop):
___
---
1. **Добавление режиссёров в фильмы** <br>
Функционал:
- вывод всех фильмов режиссера, отсортированных по количеству лайков или году выпуска; 
- получение списка всех режиссеров; получение режиссера по id; 
- создание и изменение режиссера; 
- удаление режиссера.

Ветка: <span style="color:orange">add-director</span>.

#### API
`GET /films/director/{directorId}?sortBy=[year,likes]` —
Возвращает список фильмов режиссера отсортированных по количеству лайков или году выпуска.

`GET /directors` — Список всех режиссёров

`GET /directors/{id}`— Получение режиссёра по id

`POST /directors` — Создание режиссёра

`PUT /directors` — Изменение режиссёра

`DELETE /directors/{id}` — Удаление режиссёра

___
---
2. **Удаление фильмов и пользователей** <br>
Функционал: 
- удаление фильма по идентификатору; 
- удаление задачи по идентификатору.

Ветка: <span style="color:orange">add-remove-endpoint</span>. 

#### API
`DELETE /users/{userId}` — Удаляет пользователя по идентификатору.

`DELETE /films/{filmId}` — Удаляет фильм по идентификатору.

___
---
3. **Функциональность «Поиск»** <br>
Функционал:
- возврат списка фильмов, отсортированных по популярности; 
- поиск по режиссеру и поиск по названию фильма.

Ветка: <span style="color:orange">add-search</span>.

#### API
`GET /fimls/search` — Возвращает список фильмов, отсортированных по популярности.

**Параметры строки запроса**

`query` — текст для поиска

`by` — может принимать значения `director` (поиск по режиссёру),`title` (поиск по названию), 
либо оба значения через запятую при поиске одновременно и по режиссеру и по названию.

___
---
4. **Вывод самых популярных фильмов по жанру и годам** <br>
Функционал: 
- возврат фильма самых популярных (по количеству лайков) фильмов, 
отфильтрованных по заданному жанру или году.

Ветка: <span style="color:orange">add-most-populars</span>.

#### API
`GET /films/popular?count={limit}&genreId={genreId}&year={year}` — 
Возвращает список самых популярных фильмов указанного жанра за нужный год.

___
---
5. **Функциональность «Рекомендации»** <br>
Функционал: 
- возврат фильмов, рекомендованных конкретному пользователю для просмотра 
(на основании пересечения его лайков с лайками других пользователей).

Ветка: <span style="color:orange">add-recommendations</span>.

#### API
`GET /users/{id}/recommendations` — Возвращает рекомендации по фильмам для просмотра.

___
---
6. **Функциональность  «Отзывы»** <br>
Функционал:
- добавление нового отзыва; 
- редактирование уже имеющегося отзыва; 
- удаление отзыва; 
- получение отзыва по id; 
- получение всех отзывов по идентификатору фильма;
- добавление лайка/дизлайка отзыву;
- удаление лайка/дизлайка у отзыва.

Ветка: <span style="color:orange">add-reviews</span>.

#### API
`POST /reviews` — Добавление нового отзыва.

`PUT /reviews` — Редактирование уже имеющегося отзыва.

`DELETE /reviews/{id}` — Удаление уже имеющегося отзыва.

`GET /reviews/{id}` — Получение отзыва по идентификатору.

`GET /reviews?filmId={filmId}&count={count}` — Получение всех отзывов по идентификатору фильма, 
если фильм не указан то все. Если кол-во не указано, то 10.

- `PUT /reviews/{id}/like/{userId}` — пользователь ставит лайк отзыву.
- `PUT /reviews/{id}/dislike/{userId}` — пользователь ставит дизлайк отзыву.
- `DELETE /reviews/{id}/like/{userId}` — пользователь удаляет лайк/дизлайк отзыву.
- `DELETE /reviews/{id}/dislike/{userId}` — пользователь удаляет дизлайк отзыву.

___
---
7. **Функциональность «Лента событий»** <br>
Функционал:
- возвращение ленты событий пользователя, содержащей добавление и удаление друзей, лайков и отзывов,
оставленных пользователем.

Ветка: <span style="color:orange">add-feed</span>.

#### API
`GET /users/{id}/feed` — Возвращает ленту событий пользователя.

___
---
8. **Функциональность «Общие фильмы»**
Функционал:
- возвращение общих (по лайкам) фильмов двух пользователей, отсортированных по количеству лайков.

Ветка: <span style="color:orange">add-common-films</span>.

#### API
`GET /films/common?userId={userId}&friendId={friendId}` — Возвращает список фильмов, отсортированных по популярности.

**Параметры**

`userId` — идентификатор пользователя, запрашивающего информацию;

`friendId` — идентификатор пользователя, с которым необходимо сравнить список фильмов.

---
---
## Схема БД
![](Filmorate ER-Diagram.png)